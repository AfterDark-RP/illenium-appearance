(()=>{var x=e=>new Promise(a=>setTimeout(a,e)),O=e=>{let a=GetEntityModel(e),o=GetHashKey("mp_m_freemode_01"),t=GetHashKey("mp_f_freemode_01");return a===o||a===t},h=e=>{let a=GetEntityModel(e),o=GetHashKey("mp_m_freemode_01");return a===o};function f(e){return{x:e[0],y:e[1],z:e[2]}}var ie=()=>{let e=PlayerPedId(),a=GetEntityHealth(e),o=GetPedArmour(e);return[a,o]},ne=(e,a)=>{let o=PlayerPedId();SetEntityHealth(o,e),SetPedArmour(o,a)};var R=[0,1,2,3,4,5,6,7,8,9,10,11],D=[0,1,2,6,7],F=["noseWidth","nosePeakHigh","nosePeakSize","noseBoneHigh","nosePeakLowering","noseBoneTwist","eyeBrownHigh","eyeBrownForward","cheeksBoneHigh","cheeksBoneWidth","cheeksWidth","eyesOpening","lipsThickness","jawBoneWidth","jawBoneBackSize","chinBoneLowering","chinBoneLenght","chinBoneSize","chinHole","neckThickness"],b=["blemishes","beard","eyebrows","ageing","makeUp","blush","complexion","sunDamage","lipstick","moleAndFreckles","chestHair","bodyBlemishes"],le=["Green","Emerald","Light Blue","Ocean Blue","Light Brown","Dark Brown","Hazel","Dark Gray","Light Gray","Pink","Yellow","Purple","Blackout","Shades of Gray","Tequila Sunrise","Atomic","Warp","ECola","Space Ranger","Ying Yang","Bullseye","Lizard","Dragon","Extra Terrestrial","Goat","Smiley","Possessed","Demon","Infected","Alien","Undead","Zombie"];var se={ped:!0,headBlend:!0,faceFeatures:!0,headOverlays:!0,components:!0,props:!0,tattoos:!0},K={head:{animations:{on:{dict:"mp_masks@standard_car@ds@",anim:"put_on_mask",move:51,duration:600},off:{dict:"missheist_agency2ahelmet",anim:"take_off_helmet_stand",move:51,duration:1200}},props:{male:[[1,0]],female:[[1,0]]}},body:{animations:{on:{dict:"clothingtie",anim:"try_tie_negative_a",move:51,duration:1200},off:{dict:"clothingtie",anim:"try_tie_negative_a",move:51,duration:1200}},props:{male:[[11,252],[3,15],[8,15],[10,0],[5,0]],female:[[11,15],[8,14],[3,15],[10,0],[5,0]]}},bottom:{animations:{on:{dict:"re@construction",anim:"out_of_breath",move:51,duration:1300},off:{dict:"re@construction",anim:"out_of_breath",move:51,duration:1300}},props:{male:[[4,61],[6,34]],female:[[4,15],[6,35]]}}};function ce(){RegisterNuiCallbackType("appearance_get_locales"),RegisterNuiCallbackType("appearance_get_settings_and_data"),RegisterNuiCallbackType("appearance_set_camera"),RegisterNuiCallbackType("appearance_turn_around"),RegisterNuiCallbackType("appearance_rotate_camera"),RegisterNuiCallbackType("appearance_change_model"),RegisterNuiCallbackType("appearance_change_head_blend"),RegisterNuiCallbackType("appearance_change_face_feature"),RegisterNuiCallbackType("appearance_change_hair"),RegisterNuiCallbackType("appearance_change_head_overlay"),RegisterNuiCallbackType("appearance_change_eye_color"),RegisterNuiCallbackType("appearance_change_component"),RegisterNuiCallbackType("appearance_change_prop"),RegisterNuiCallbackType("appearance_apply_tattoo"),RegisterNuiCallbackType("appearance_preview_tattoo"),RegisterNuiCallbackType("appearance_delete_tattoo"),RegisterNuiCallbackType("appearance_wear_clothes"),RegisterNuiCallbackType("appearance_remove_clothes"),RegisterNuiCallbackType("appearance_save"),RegisterNuiCallbackType("appearance_exit"),on("__cfx_nui:appearance_get_locales",(e,a)=>{let o=LoadResourceFile(GetCurrentResourceName(),`locales/${GetConvar("fivem-appearance:locale","en")}.json`);a(o)}),on("__cfx_nui:appearance_get_settings_and_data",(e,a)=>{let o=_e(),t=J(),r=q();a({config:o,appearanceData:t,appearanceSettings:r})}),on("__cfx_nui:appearance_set_camera",(e,a)=>{a({}),Q(e)}),on("__cfx_nui:appearance_turn_around",(e,a)=>{a({}),pe(PlayerPedId())}),on("__cfx_nui:appearance_rotate_camera",(e,a)=>{a({}),ye(e)}),on("__cfx_nui:appearance_change_model",async(e,a)=>{await w(e);let o=PlayerPedId();SetEntityHeading(PlayerPedId(),Y),SetEntityInvincible(o,!0),TaskStandStill(o,-1);let t=H(o),r=q();a({appearanceSettings:r,appearanceData:t})}),on("__cfx_nui:appearance_change_component",(e,a)=>{let o=PlayerPedId();B(o,e),a(Z(o,e.component_id))}),on("__cfx_nui:appearance_change_prop",(e,a)=>{let o=PlayerPedId();L(o,e),a($(o,e.prop_id))}),on("__cfx_nui:appearance_change_head_blend",(e,a)=>{a({}),S(PlayerPedId(),e)}),on("__cfx_nui:appearance_change_face_feature",(e,a)=>{a({}),M(PlayerPedId(),e)}),on("__cfx_nui:appearance_change_head_overlay",(e,a)=>{a({}),G(PlayerPedId(),e)}),on("__cfx_nui:appearance_change_hair",(e,a)=>{let o=PlayerPedId();N(o,e),a(de(o,e))}),on("__cfx_nui:appearance_change_eye_color",(e,a)=>{a({}),T(PlayerPedId(),e)}),on("__cfx_nui:appearance_apply_tattoo",(e,a)=>{a({}),Pe(PlayerPedId(),e)}),on("__cfx_nui:appearance_preview_tattoo",(e,a)=>{a({});let{data:o,tattoo:t}=e;fe(PlayerPedId(),o,t)}),on("__cfx_nui:appearance_delete_tattoo",(e,a)=>{a({}),ve(PlayerPedId(),e)}),on("__cfx_nui:appearance_wear_clothes",(e,a)=>{a({});let{data:o,key:t}=e;ue(o,t)}),on("__cfx_nui:appearance_remove_clothes",(e,a)=>{a({}),me(e)}),on("__cfx_nui:appearance_save",(e,a)=>{a({}),j(e)}),on("__cfx_nui:appearance_exit",(e,a)=>{a({}),j()})}var ke=global.exports,ge={default:{coords:{x:0,y:2.2,z:.2},point:{x:0,y:0,z:-.05}},head:{coords:{x:0,y:.9,z:.65},point:{x:0,y:0,z:.6}},body:{coords:{x:0,y:1.2,z:.2},point:{x:0,y:0,z:.2}},bottom:{coords:{x:0,y:.98,z:-.7},point:{x:0,y:0,z:-.9}}},Ae={default:{x:1.5,y:-1},head:{x:.7,y:-.45},body:{x:1.2,y:-.45},bottom:{x:.7,y:-.45}},z,X,k,A,Y,m,I,C,g,he={};function He(){let e={hair:[],makeUp:[]};for(let a=0;a<GetNumHairColors();a++)e.hair.push(GetPedHairRgbColor(a));for(let a=0;a<GetNumMakeupColors();a++)e.makeUp.push(GetMakeupRgbColor(a));return e}function J(){return k||(k=H(PlayerPedId())),k}function Z(e,a){let o=GetPedDrawableVariation(e,a);return{component_id:a,drawable:{min:0,max:GetNumberOfPedDrawableVariations(e,a)-1},texture:{min:0,max:GetNumberOfPedTextureVariations(e,a,o)-1}}}function $(e,a){let o=GetPedPropIndex(e,a);return{prop_id:a,drawable:{min:-1,max:GetNumberOfPedPropDrawableVariations(e,a)-1},texture:{min:-1,max:GetNumberOfPedPropTextureVariations(e,a,o)-1}}}function de(e,a){let o=He();return{style:{min:0,max:GetNumberOfPedDrawableVariations(e,2)-1},color:{items:o.hair},highlight:{items:o.hair},texture:{min:0,max:GetNumberOfPedTextureVariations(e,2,a.style)-1}}}function q(){let e=PlayerPedId(),a={model:{items:ae}},o={items:xe},t=R.map(y=>Z(e,y)),r=D.map(y=>$(e,y)),i={shapeFirst:{min:0,max:45},shapeSecond:{min:0,max:45},skinFirst:{min:0,max:45},skinSecond:{min:0,max:45},shapeMix:{min:0,max:1,factor:.1},skinMix:{min:0,max:1,factor:.1}},l=F.reduce((y,p)=>({...y,[p]:{min:-1,max:1,factor:.1}}),{}),n=He(),s={beard:n.hair,eyebrows:n.hair,chestHair:n.hair,makeUp:n.makeUp,blush:n.makeUp,lipstick:n.makeUp},c=b.reduce((y,p,v)=>{let P={style:{min:0,max:GetPedHeadOverlayNum(v)-1},opacity:{min:0,max:1,factor:.1}};return s[p]&&Object.assign(P,{color:{items:s[p]}}),{...y,[p]:P}},{}),d={style:{min:0,max:GetNumberOfPedDrawableVariations(e,2)-1},color:{items:n.hair},highlight:{items:n.hair},texture:{min:0,max:GetNumberOfPedTextureVariations(e,2,GetPedDrawableVariation(e,2))-1}};return{ped:a,components:t,props:r,headBlend:i,faceFeatures:l,headOverlays:c,hair:d,eyeColor:{min:0,max:30},tattoos:o}}function _e(){return X}function Q(e){if(g)return;e!=="current"&&(I=e);let{coords:a,point:o}=ge[I],t=C?-1:1;if(m){let r=f(GetOffsetFromEntityInWorldCoords(PlayerPedId(),a.x*t,a.y*t,a.z)),i=f(GetOffsetFromEntityInWorldCoords(PlayerPedId(),o.x,o.y,o.z)),l=CreateCameraWithParams("DEFAULT_SCRIPTED_CAMERA",r.x,r.y,r.z,0,0,0,50,!1,0);PointCamAtCoord(l,i.x,i.y,i.z),SetCamActiveWithInterp(l,m,1e3,1,1),g=!0;let n=setInterval(()=>{!IsCamInterpolating(m)&&IsCamActive(l)&&(DestroyCam(m,!1),m=l,g=!1,clearInterval(n))},500)}else{let r=f(GetOffsetFromEntityInWorldCoords(PlayerPedId(),a.x,a.y,a.z)),i=f(GetOffsetFromEntityInWorldCoords(PlayerPedId(),o.x,o.y,o.z));m=CreateCameraWithParams("DEFAULT_SCRIPTED_CAMERA",r.x,r.y,r.z,0,0,0,50,!1,0),PointCamAtCoord(m,i.x,i.y,i.z),SetCamActive(m,!0)}}async function ye(e){if(g)return;let{coords:a,point:o}=ge[I],t=Ae[I],r,i=C?-1:1;e==="left"?r=1:e==="right"&&(r=-1);let l=f(GetOffsetFromEntityInWorldCoords(PlayerPedId(),(a.x+t.x)*r*i,(a.y+t.y)*i,a.z)),n=f(GetOffsetFromEntityInWorldCoords(PlayerPedId(),o.x,o.y,o.z)),s=CreateCameraWithParams("DEFAULT_SCRIPTED_CAMERA",l.x,l.y,l.z,0,0,0,50,!1,0);PointCamAtCoord(s,n.x,n.y,n.z),SetCamActiveWithInterp(s,m,1e3,1,1),g=!0;let c=setInterval(()=>{!IsCamInterpolating(m)&&IsCamActive(s)&&(DestroyCam(m,!1),m=s,g=!1,clearInterval(c))},500)}function pe(e){C=!C;let a=OpenSequenceTask()??0;a!==0&&(TaskGoStraightToCoord(0,A.x,A.y,A.z,8,-1,GetEntityHeading(e)-180,.1),TaskStandStill(0,-1),CloseSequenceTask(a),ClearPedTasks(e),TaskPerformSequence(e,a),ClearSequenceTask(a))}async function ue(e,a){let{animations:o,props:t}=K[a],{dict:r,anim:i,move:l,duration:n}=o.on,{male:s,female:c}=t,{components:d}=e,u=PlayerPedId(),y=h(u);for(RequestAnimDict(r);!HasAnimDictLoaded(r);)await x(0);if(y)for(let p=0;p<s.length;p++){let[v]=s[p];for(let P=0;P<d.length;P++){let{component_id:V,drawable:U,texture:W}=d[P];V===v&&SetPedComponentVariation(u,v,U,W,2)}}else for(let p=0;p<c.length;p++){let[v]=c[p];for(let P=0;P<d.length;P++){let{component_id:V,drawable:U,texture:W}=d[P];V===v&&SetPedComponentVariation(u,v,U,W,2)}}TaskPlayAnim(u,r,i,3,3,n,l,0,!1,!1,!1)}async function me(e){let{animations:a,props:o}=K[e],{dict:t,anim:r,move:i,duration:l}=a.off,{male:n,female:s}=o,c=PlayerPedId(),d=h(c);for(RequestAnimDict(t);!HasAnimDictLoaded(t);)await x(0);if(d)for(let u=0;u<n.length;u++){let[y,p]=n[u];SetPedComponentVariation(c,y,p,0,2)}else for(let u=0;u<s.length;u++){let[y,p]=s[u];SetPedComponentVariation(c,y,p,0,2)}TaskPlayAnim(c,t,r,3,3,l,i,0,!1,!1,!1)}var ee=()=>he,E=(e,a)=>{he=a;let o=h(e);ClearPedDecorations(e);for(let t in a)for(let r=0;r<a[t].length;r++){let{collection:i,hashFemale:l,hashMale:n}=a[t][r],s=o?n:l;AddPedDecorationFromHashes(e,GetHashKey(i),GetHashKey(s))}},Pe=(e,a)=>{let o=h(e);ClearPedDecorations(e);for(let t in a)for(let r=0;r<a[t].length;r++){let{collection:i,hashFemale:l,hashMale:n}=a[t][r],s=o?n:l;AddPedDecorationFromHashes(e,GetHashKey(i),GetHashKey(s))}},ve=(e,a)=>{let o=h(e);ClearPedDecorations(e);for(let t in a)for(let r=0;r<a[t].length;r++){let{collection:i,hashFemale:l,hashMale:n}=a[t][r],s=o?n:l;AddPedDecorationFromHashes(e,GetHashKey(i),GetHashKey(s))}},fe=(e,a,o)=>{let t=h(e),{collection:r,hashFemale:i,hashMale:l}=o,n=t?l:i;ClearPedDecorations(e),AddPedDecorationFromHashes(e,GetHashKey(r),GetHashKey(n));for(let s in a)for(let c=0;c<a[s].length;c++){let{name:d,collection:u,hashFemale:y,hashMale:p}=a[s][c];if(o.name!==d){let v=t?p:y;AddPedDecorationFromHashes(e,GetHashKey(u),GetHashKey(v))}}};function Ie(e,a=se){let o=PlayerPedId();k=H(o),z=e,X=a,A=f(GetEntityCoords(o,!0)),Y=GetEntityHeading(o),C=!1,g=!1,Q("default"),SetNuiFocus(!0,!0),SetNuiFocusKeepInput(!1),RenderScriptCams(!0,!1,0,!0,!0),DisplayRadar(!1),SetEntityInvincible(o,!0),TaskStandStill(o,-1);let t={type:"appearance_display",payload:{}};SendNuiMessage(JSON.stringify(t))}function j(e){RenderScriptCams(!1,!1,0,!0,!0),DestroyCam(m,!1),DisplayRadar(!0),SetNuiFocus(!1,!1);let a=PlayerPedId();ClearPedTasksImmediately(a),SetEntityInvincible(a,!1);let o={type:"appearance_hide",payload:{}};if(SendNuiMessage(JSON.stringify(o)),!e)oe(J());else{let{tattoos:t}=e;E(a,t)}z&&z(e),z=null,X=null,k=null,A=null,m=null,I=null,C=null,g=null}function Ee(e){e===GetCurrentResourceName()&&(SetNuiFocus(!1,!1),SetNuiFocusKeepInput(!1))}function Oe(){ce(),on("onResourceStop",Ee),ke("startPlayerCustomization",Ie)}var Ce={loadModule:Oe};var _=global.exports,Re="0x2746bd9d88c5c5d0",xe=JSON.parse(LoadResourceFile(GetCurrentResourceName(),"tattoos.json")),ae=JSON.parse(LoadResourceFile(GetCurrentResourceName(),"peds.json")),De=ae.reduce((e,a)=>({...e,[GetHashKey(a)]:a}),{});function Fe(e){return De[GetEntityModel(e)]}function be(e){let a=[];return R.forEach(o=>{a.push({component_id:o,drawable:GetPedDrawableVariation(e,o),texture:GetPedTextureVariation(e,o)})}),a}function Se(e){let a=[];return D.forEach(o=>{a.push({prop_id:o,drawable:GetPedPropIndex(e,o),texture:GetPedPropTextureIndex(e,o)})}),a}function Me(e){let a=new ArrayBuffer(80);global.Citizen.invokeNative(Re,e,new Uint32Array(a));let{0:o,2:t,6:r,8:i}=new Uint32Array(a),{0:l,2:n}=new Float32Array(a,48),s=parseFloat(l.toFixed(1)),c=parseFloat(n.toFixed(1));return{shapeFirst:o,shapeSecond:t,skinFirst:r,skinSecond:i,shapeMix:s,skinMix:c}}function Ge(e){return F.reduce((o,t,r)=>{let i=parseFloat(GetPedFaceFeature(e,r).toFixed(1));return{...o,[t]:i}},{})}function Ne(e){return b.reduce((o,t,r)=>{let[,i,,l,n,s]=GetPedHeadOverlayData(e,r),c=i!==255,d=c?i:0,u=c?parseFloat(s.toFixed(1)):0,y;return t==="makeUp"?y={style:d,opacity:u,color:l,secondColor:n}:y={style:d,opacity:u,color:l},{...o,[t]:y}},{})}function Te(e){return{style:GetPedDrawableVariation(e,2),color:GetPedHairColor(e),highlight:GetPedHairHighlightColor(e),texture:GetPedTextureVariation(e,2)}}function H(e){let a=GetPedEyeColor(e);return{model:Fe(e)||"mp_m_freemode_01",headBlend:Me(e),faceFeatures:Ge(e),headOverlays:Ne(e),components:be(e),props:Se(e),hair:Te(e),eyeColor:a<le.length?a:0,tattoos:ee()}}async function w(e){if(!e||!IsModelInCdimage(e))return;for(RequestModel(e);!HasModelLoaded(e);)await x(0);let[a,o]=ie();SetPlayerModel(PlayerId(),e),SetModelAsNoLongerNeeded(e);let t=PlayerPedId();O(t)&&(SetPedDefaultComponentVariation(t),SetPedHeadBlendData(t,0,0,0,0,0,0,0,0,0,!1)),ne(a,o)}function S(e,a){if(!a)return;let{shapeFirst:o,shapeSecond:t,shapeMix:r,skinFirst:i,skinSecond:l,skinMix:n}=a;O(e)&&SetPedHeadBlendData(e,o,t,0,i,l,0,r,n,0,!1)}function M(e,a){!a||F.forEach((o,t)=>{let r=a[o];SetPedFaceFeature(e,t,r)})}function G(e,a){!a||b.forEach((o,t)=>{let r=a[o];if(SetPedHeadOverlay(e,t,r.style,r.opacity),r.color||r.color===0){let l=1;var i=r.color;({blush:!0,lipstick:!0,makeUp:!0})[o]&&(l=2),o==="makeUp"&&(i=r.secondColor),SetPedHeadOverlayColor(e,t,l,r.color,i)}})}function N(e,a){if(!a)return;let{style:o,color:t,highlight:r,texture:i}=a;SetPedComponentVariation(e,2,o,i,2),SetPedHairColor(e,t,r)}function T(e,a){!a||SetPedEyeColor(e,a)}function B(e,a){if(!a)return;let{component_id:o,drawable:t,texture:r}=a;({0:!0,2:!0})[o]&&O(e)||SetPedComponentVariation(e,o,t,r,0)}function te(e,a){!a||a.forEach(o=>B(e,o))}function L(e,a){if(!a)return;let{prop_id:o,drawable:t,texture:r}=a;t===-1?ClearPedProp(e,o):SetPedPropIndex(e,o,t,r,!1)}function re(e,a){!a||a.forEach(o=>L(e,o))}async function oe(e){if(!e)return;let{model:a,components:o,props:t,headBlend:r,faceFeatures:i,headOverlays:l,hair:n,eyeColor:s,tattoos:c}=e;await w(a);let d=PlayerPedId();te(d,o),re(d,t),r&&S(d,r),i&&M(d,i),l&&G(d,l),n&&N(d,n),s&&T(d,s),c&&E(d,c)}function we(e,a){if(!a)return;let{components:o,props:t,headBlend:r,faceFeatures:i,headOverlays:l,hair:n,eyeColor:s,tattoos:c}=a;te(e,o),re(e,t),r&&S(e,r),i&&M(e,i),l&&G(e,l),n&&N(e,n),s&&T(e,s),c&&E(e,c)}function Be(){Ce.loadModule(),_("getPedModel",Fe),_("getPedComponents",be),_("getPedProps",Se),_("getPedHeadBlend",Me),_("getPedFaceFeatures",Ge),_("getPedHeadOverlays",Ne),_("getPedHair",Te),_("getPedTattoos",ee),_("getPedAppearance",H),_("setPlayerModel",w),_("setPedHeadBlend",S),_("setPedFaceFeatures",M),_("setPedHeadOverlays",G),_("setPedHair",N),_("setPedEyeColor",T),_("setPedComponent",B),_("setPedComponents",te),_("setPedProp",L),_("setPedProps",re),_("setPedTattoos",E),_("setPlayerAppearance",oe),_("setPedAppearance",we)}Be();})();
